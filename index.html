<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Bright Career Classes</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<meta name="google-site-verification" content="TWdW0gvrW6T77Qodr3lPEdWIVcW7qwqUvINv-kl6fJU" />

<link rel="icon" type="image/png" href="favicon.png?v=2">
<link rel="apple-touch-icon" href="favicon.png?v=2">

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

<style>
  html{scroll-behavior:smooth}
  body{margin:0;font-family:'Poppins',Arial,sans-serif;background:#f4f6fb;position:relative;}
  body::before{
    content:"";position:fixed;inset:0;background-image:url("bcc.png");
    background-repeat:repeat;background-size:300px 300px;background-position:center;
    opacity:.025;z-index:-1;pointer-events:none;
  }

  header{
    position:sticky;top:0;z-index:9999;
    background:rgba(11,60,93,0.92);
    backdrop-filter:blur(10px);
    box-shadow:0 6px 18px rgba(0,0,0,.18);
    color:#fff;padding:15px;
    display:flex;align-items:center;justify-content:space-between;
  }
  header .left{display:flex;align-items:center;gap:12px}
  header img{width:55px;height:55px;border-radius:50%;background:#fff;padding:3px}
  header h1{font-size:18px;margin:0;line-height:1.2}
  header p{margin:0;font-size:12px;opacity:.95}

  .menu-btn{
    font-size:26px;cursor:pointer;background:rgba(255,255,255,0.15);
    width:42px;height:42px;border-radius:50%;text-align:center;line-height:42px;
    user-select:none;
  }
  .dropdown{
    position:absolute;right:12px;top:70px;background:#fff;width:260px;
    box-shadow:0 0 10px rgba(0,0,0,.25);display:none;z-index:999;border-radius:12px;overflow:hidden
  }
  .dropdown a{display:block;padding:12px;text-decoration:none;color:#222;border-bottom:1px solid #eee;font-weight:700}
  .dropdown a:hover{background:#f3f3f3}

  section{padding:20px}
  .card{
    background:rgba(255,255,255,0.95);
    border:1px solid rgba(11,60,93,0.10);
    padding:20px;border-radius:16px;
    box-shadow:0 12px 30px rgba(0,0,0,0.08);
    margin:15px auto;max-width:980px;
    transition:.25s;
  }
  .card:hover{transform:translateY(-4px)}
  .big-title{font-size:28px;font-weight:800;text-align:center;color:#0b3c5d;user-select:none;cursor:pointer}
  .moti{text-align:center;font-size:18px;margin-top:10px;line-height:1.7}

  input,select,textarea,button{
    width:100%;padding:11px;margin:8px 0;font-size:16px;
    border-radius:10px;border:1px solid #ddd;box-sizing:border-box
  }
  button{background:#0b3c5d;color:#fff;border:none;cursor:pointer;font-weight:800;border-radius:10px}
  button:hover{background:#09314b}
  .small-btn{background:#1c6ea4}
  .small-btn:hover{background:#144e75}
  .danger-btn{background:#e74c3c}
  .danger-btn:hover{background:#c0392b}
  .muted{color:#666;font-size:14px}
  .hidden{display:none !important}

  .pill{
    display:inline-block;padding:7px 12px;border-radius:999px;font-weight:800;font-size:13px;
    border:1px solid #e6eef7;background:#f7f9fc;color:#0b3c5d;
  }
  .pill.green{background:#eaf7ee;border-color:#cfe9d7;color:#1a7f37}
  .pill.red{background:#ffeceb;border-color:#ffd0cb;color:#b72212}

  .quick-nav{display:flex;gap:10px;flex-wrap:wrap;justify-content:center;margin-top:18px}
  .quick-nav a{
    padding:10px 16px;background:#0b3c5d;color:#fff;border-radius:12px;text-decoration:none;
    font-weight:800;transition:.2s;
  }
  .quick-nav a:hover{transform:scale(1.03);background:#09314b}

  .social-box{text-align:center;margin-top:15px}
  .social-box h3{color:#0b3c5d;margin-bottom:12px}
  .social-link{
    display:flex;align-items:center;gap:12px;justify-content:flex-start;
    max-width:460px;margin:12px auto;padding:12px 14px;border-radius:14px;
    text-decoration:none;background:#f7f9fc;border:1px solid #e6eef7;
    box-shadow:0 3px 8px rgba(0,0,0,0.05);transition:.2s;
  }
  .social-link .icon{
    width:44px;height:44px;border-radius:12px;display:flex;align-items:center;justify-content:center;
    overflow:hidden;background:#fff;border:1px solid #e6eef7;
  }
  .social-link .icon img{width:28px;height:28px;object-fit:contain;display:block}
  .social-link:hover{transform:scale(1.02)}

  /* Filter buttons */
  .filter-row{display:flex;gap:8px;flex-wrap:wrap;margin-top:10px}
  .fbtn{
    width:auto; padding:10px 12px; border-radius:12px;
    background:#f1f6fb; color:#0b3c5d; border:1px solid #dbe8f6;
    font-weight:900; cursor:pointer;
  }
  .fbtn.active{background:#0b3c5d;color:#fff;border-color:#0b3c5d}

  /* ID CARD */
  .idcard-wrap{display:none;margin-top:15px;padding:16px;border-radius:16px;background:#f7f9fc;border:1px solid #e6eef7;}
  .idcard{
    width:100%;max-width:420px;margin:0 auto;border-radius:18px;overflow:hidden;background:#fff;
    border:1px solid rgba(0,0,0,0.08);box-shadow:0 14px 30px rgba(0,0,0,0.10);
  }
  .id-top{background:linear-gradient(90deg,#0b3c5d,#1c6ea4);padding:14px;color:#fff;display:flex;gap:12px;align-items:center;}
  .id-top img{width:52px;height:52px;border-radius:14px;background:#fff;padding:4px}
  .id-top .t1{font-weight:900;font-size:16px;line-height:1.1}
  .id-top .t2{font-size:12px;opacity:.95;margin-top:3px}
  .id-body{padding:14px;display:flex;gap:14px;align-items:flex-start;justify-content:space-between}
  .id-left{flex:1}
  .id-row{font-size:14px;margin:6px 0;color:#222}
  .id-row b{color:#0b3c5d}
  .student-id{
    margin-top:10px;padding:8px 12px;border-radius:12px;background:#eaf2ff;border:1px solid #d6e6ff;
    display:inline-block;font-weight:900;color:#0b3c5d;
  }
  .qr-box{
    width:120px;min-width:120px;height:120px;border-radius:16px;background:#fff;border:1px solid #eee;
    display:flex;align-items:center;justify-content:center;
  }
  .id-footer{padding:12px 14px;background:#fff;border-top:1px solid #eee;font-size:12px;color:#666;text-align:center}

  /* Floating */
  .call-float{
    position:fixed;right:15px;bottom:25px;background:#007bff;color:#fff;
    padding:12px 16px;border-radius:50px;text-decoration:none;font-weight:900;
    box-shadow:0 6px 15px rgba(0,0,0,.35);z-index:5000
  }
  .whatsapp-float-right{
    position:fixed;right:15px;bottom:90px;background:#25D366;color:#fff;
    padding:12px 16px;border-radius:50px;text-decoration:none;font-weight:900;
    box-shadow:0 6px 15px rgba(0,0,0,.35);z-index:5000;display:flex;gap:10px;align-items:center
  }
  .whatsapp-float-right img{width:24px;height:24px;object-fit:contain}
  .pulse{animation:pulseGlow 2s infinite}
  @keyframes pulseGlow{
    0%{box-shadow:0 0 0 0 rgba(37,211,102,0.7)}
    70%{box-shadow:0 0 0 18px rgba(37,211,102,0)}
    100%{box-shadow:0 0 0 0 rgba(37,211,102,0)}
  }

  @media(max-width:768px){
    header h1{font-size:16px}
    .big-title{font-size:22px}
    .moti{font-size:16px}
    .dropdown{width:230px}
  }
  @media(max-width:500px){
    .card{padding:16px;border-radius:14px}
    input,select,textarea,button{font-size:15px;padding:12px;border-radius:12px}
    .menu-btn{width:40px;height:40px;line-height:40px}
    .whatsapp-float-right{right:10px;bottom:80px;padding:10px 12px;font-size:13px}
    .call-float{right:10px;bottom:20px;padding:10px 12px;font-size:13px}
  }
</style>
</head>

<body>

<header>
  <div class="left">
    <img src="bcc.png" alt="Logo">
    <div>
      <h1>Bright Career Classes</h1>
      <p>Learn Today ‚Ä¢ Lead Tomorrow</p>
    </div>
  </div>

  <div class="menu-btn" onclick="toggleMenu()">‚ãÆ</div>

  <div class="dropdown" id="menu">
    <a href="#home" onclick="closeMenu()">üè† Home</a>
    <a href="#about" onclick="closeMenu()">‚Ñπ About</a>
    <a href="#admission" onclick="closeMenu()">üìù Admission</a>
    <a href="#statusCheck" onclick="closeMenu()">‚úÖ Status Check</a>
  </div>
</header>

<!-- ‚úÖ HOME -->
<section id="home">
  <div class="card">
    <div class="big-title" onclick="secretAdminTap()">
      Welcome to Bright Career Classes
    </div>

    <div class="moti">
      ‚úÖ ‚ÄúDream Big. Work Hard. Achieve Excellence.‚Äù<br>
      ‚úÖ ‚ÄúYour Success is Our Mission.‚Äù<br>
      ‚úÖ ‚ÄúConsistency + Practice = Top Results.‚Äù<br><br>
      üìö Classes: <b>6 to 12</b> (CBSE ‚Ä¢ ICSE/ISC ‚Ä¢ UP Board)
    </div>

    <div style="margin-top:15px;padding:12px;border-radius:14px;background:linear-gradient(90deg,#0b3c5d,#1c6ea4);color:#fff;text-align:center;font-weight:900;">
      üéØ Demo Class Available ‚Ä¢ Weekly Tests ‚Ä¢ Best Notes Support ‚úÖ
    </div>

    <div class="quick-nav">
      <a href="#admission">üìù Admission</a>
      <a href="#statusCheck">‚úÖ Status Check</a>
    </div>

    <hr>

    <div class="social-box">
      <h3>Follow & Learn Online</h3>

      <a class="social-link" target="_blank" href="https://youtube.com/@brightcareerclasses-1?si=QNgL_2sOHDz6l-Vy">
        <span class="icon"><img src="youtube.png" alt="YouTube"></span>
        <div class="text">
          <b>YouTube Classes</b>
          <small>@brightcareerclasses-1</small>
        </div>
      </a>

      <a class="social-link" target="_blank" href="https://instagram.com/brightcareerclasses0701">
        <span class="icon"><img src="instagram.png" alt="Instagram"></span>
        <div class="text">
          <b>Instagram</b>
          <small>brightcareerclasses0701</small>
        </div>
      </a>
    </div>
  </div>
</section>

<!-- ‚úÖ ABOUT -->
<section id="about">
  <div class="card">
    <h2>About Our Classes</h2>

    <p style="font-size:16px;line-height:1.8;">
      Bright Career Classes is committed to providing quality education with strong basics, discipline,
      and confidence. We focus on concept clarity, regular practice, and exam-oriented preparation
      for all boards (CBSE, ICSE/ISC, UP Board).
    </p>

    <p style="font-size:16px;line-height:1.8;">
      ‚úÖ Experienced Teachers <br>
      ‚úÖ Demo Class Available <br>
      ‚úÖ Weekly Tests & Revision <br>
      ‚úÖ Special Focus for Class 11 & 12 (PCM / PCB)
    </p>

    <hr>
    <p><b>Director:</b> Deepak Rai</p>
    <p><b>Administrator:</b> Amit Rai</p>
    <p><b>Contact:</b> 9140466780</p>
    <p><b>Email:</b> <a href="mailto:brightclasses78@gmail.com">brightclasses78@gmail.com</a></p>
  </div>
</section>

<!-- ‚úÖ ADMISSION -->
<section id="admission">
  <div class="card">
    <h2>Admission Form</h2>
    <p class="muted">‚úÖ Submit admission request ‚Üí Admin approval required</p>

    <input id="sname" placeholder="Student Name">
    <select id="sboard">
      <option value="">Select Board</option>
      <option value="CBSE">CBSE</option>
      <option value="ICSE/ISC">ICSE/ISC</option>
      <option value="UP BOARD">UP BOARD</option>
    </select>

    <select id="sclass">
      <option value="">Select Class</option>
      <option>6</option><option>7</option><option>8</option>
      <option>9</option><option>10</option><option>11</option><option>12</option>
    </select>

    <input id="sphone" maxlength="10" placeholder="Mobile Number (10 digits)"
           oninput="this.value=this.value.replace(/[^0-9]/g,'');">

    <input id="semail" placeholder="Email (example@gmail.com)">
    <textarea id="saddress" placeholder="Address"></textarea>

    <button onclick="submitAdmission()">Submit Admission Request</button>

    <div class="card" style="background:#f7f9fc;border:1px solid #e6eef7;box-shadow:none;">
      <b>Status:</b> <span id="admissionStatusText" class="pill red">Not Submitted</span>
      <div class="muted" style="margin-top:6px;">‚úÖ Admin approve karega tabhi Admission No + ID Card banega</div>
    </div>
  </div>
</section>

<!-- ‚úÖ STATUS CHECK -->
<section id="statusCheck">
  <div class="card">
    <h2>‚úÖ Check Admission Status</h2>
    <p class="muted">Enter your Mobile Number to check your admission approval + ID Card.</p>

    <input id="checkPhone" placeholder="Enter Mobile Number (10 digits)" maxlength="10"
      oninput="this.value=this.value.replace(/[^0-9]/g,'');">

    <button class="small-btn" onclick="checkStatus()">üîç Check Status</button>

    <div id="statusResult" class="card" style="margin-top:15px;background:#f7f9fc;border:1px solid #e6eef7;box-shadow:none;">
      ‚úÖ Result will show here...
    </div>

    <div id="statusIdCardWrap" class="idcard-wrap">
      <h3 style="text-align:center;color:#0b3c5d;margin-top:0;">‚úÖ Your ID Card (Approved)</h3>

      <div id="statusIdCard" class="idcard">
        <div class="id-top">
          <img src="bcc.png" alt="Logo">
          <div>
            <div class="t1">Bright Career Classes</div>
            <div class="t2">Official Student ID Card</div>
          </div>
        </div>

        <div class="id-body">
          <div class="id-left">
            <div class="id-row"><b>Name:</b> <span id="sCardName">-</span></div>
            <div class="id-row"><b>Board:</b> <span id="sCardBoard">-</span></div>
            <div class="id-row"><b>Class:</b> <span id="sCardClass">-</span></div>
            <div class="id-row"><b>Phone:</b> <span id="sCardPhone">-</span></div>
            <div class="id-row"><b>Email:</b> <span id="sCardEmail">-</span></div>
            <div class="id-row"><b>Admission No:</b> <span id="sCardAdmNo">-</span></div>

            <div class="student-id">ID: <span id="sCardID">BCC-000000</span></div>
          </div>

          <div class="qr-box">
            <div id="sQrBox"></div>
          </div>
        </div>

        <div class="id-footer">
          ‚úÖ Scan QR to verify ‚Ä¢ Bright Career Classes
        </div>
      </div>

      <button style="margin-top:12px;" onclick="downloadStatusIDCardPNG()">‚¨á Download ID Card (PNG)</button>
    </div>

  </div>
</section>

<!-- ‚úÖ ADMIN (Hidden) -->
<section id="adminLogin" class="hidden">
  <div class="card">
    <h2>‚öô Admin Login</h2>
    <p class="muted">‚úÖ Phone: tap Home title 7 times (10 sec) | Laptop: CTRL + SHIFT + A</p>

    <input id="adminPass" type="password" placeholder="Admin Password">

    <input id="adminPin" type="password" maxlength="4"
      placeholder="4 Digit Admin PIN"
      oninput="this.value=this.value.replace(/[^0-9]/g,'');">

    <button onclick="adminLogin()">Login as Admin</button>

    <div id="adminPanel" class="hidden">
      <hr>
      <h2 style="margin-top:0;color:#0b3c5d;">‚úÖ Admin Panel</h2>
      <button class="danger-btn" onclick="adminLogout()">Logout Admin</button>

      <hr>
      <h3 style="color:#0b3c5d;margin-bottom:6px;">Admissions</h3>
      <div class="muted">‚úÖ Search + Filter + Approve/Reject/Delete</div>

      <input id="adminSearch" placeholder="üîç Search by Name / Phone / Class / Board / Status / AdmNo"
        oninput="renderAdminAdmissions()">

      <div class="filter-row">
        <button class="fbtn active" id="fAll" onclick="setAdminFilter('ALL')">All</button>
        <button class="fbtn" id="fPending" onclick="setAdminFilter('PENDING')">Pending</button>
        <button class="fbtn" id="fApproved" onclick="setAdminFilter('APPROVED')">Approved</button>
        <button class="fbtn" id="fRejected" onclick="setAdminFilter('REJECTED')">Rejected</button>
      </div>

      <div id="adminAdmissionsList" style="margin-top:10px;">No admissions yet.</div>
    </div>
  </div>
</section>

<a class="call-float" id="callBtn" href="tel:+919140466780">üìû Call Us</a>
<a class="whatsapp-float-right pulse" id="waBtn" target="_blank"
   href="https://wa.me/919140466780?text=Hello%20Bright%20Career%20Classes,%20I%20want%20admission">
  <img src="watsapp.png" alt="WhatsApp">
  <span>Admission on WhatsApp</span> üí¨
</a>

<script src="https://cdn.jsdelivr.net/npm/qrcodejs@1.0.0/qrcode.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

<script>
/* MENU */
function toggleMenu(){
  const m = document.getElementById("menu");
  m.style.display = (m.style.display === "block") ? "none" : "block";
}
function closeMenu(){ document.getElementById("menu").style.display = "none"; }
function $(id){ return document.getElementById(id); }

document.addEventListener("click", function(e){
  const menu = $("menu");
  const btn = document.querySelector(".menu-btn");
  if(menu.style.display === "block" && !menu.contains(e.target) && e.target !== btn){
    closeMenu();
  }
});

function isValidEmail(email){ return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email); }
function isValidPhone(phone){ return /^[0-9]{10}$/.test(phone); }

function loadDB(key, fallback){
  try{
    const v = JSON.parse(localStorage.getItem(key) || "null");
    return v ? v : fallback;
  }catch(e){ return fallback; }
}
function saveDB(key, data){ localStorage.setItem(key, JSON.stringify(data)); }

/* DB */
function getAdmissions(){ return loadDB("bcc_admissions", []); }
function setAdmissions(a){ saveDB("bcc_admissions", a); }

function makeAdmissionNo(){
  const num = Math.floor(100000 + Math.random()*900000);
  return "ADM-" + num;
}

/* ‚úÖ Admission Submit */
function submitAdmission(){
  const name = $("sname").value.trim();
  const board = $("sboard").value.trim();
  const cls = $("sclass").value.trim();
  const phone = $("sphone").value.trim();
  const email = $("semail").value.trim();
  const address = $("saddress").value.trim();

  if(!name || !board || !cls || !phone || !email){
    alert("‚ùå Fill required fields (Name, Board, Class, Mobile, Email)");
    return;
  }
  if(!isValidPhone(phone)){ alert("‚ùå Mobile must be exactly 10 digits (numbers only)"); return; }
  if(!isValidEmail(email)){ alert("‚ùå Enter valid email"); return; }

  let all = getAdmissions();
  if(all.some(a => a.phone === phone)){
    alert("‚úÖ This mobile number already submitted admission request.");
    return;
  }

  const serial = all.length + 1;

  all.push({
    serial,
    key: phone,
    name,board,cls,phone,email,address,
    status:"PENDING",admissionNo:"",
    time:new Date().toLocaleString()
  });

  setAdmissions(all);

  $("admissionStatusText").className="pill red";
  $("admissionStatusText").textContent="Pending Approval";

  alert("‚úÖ Admission Submitted! Admin approval required.");

  let msg =
    "üìò *New Admission Request (PENDING)*%0A%0A" +
    "S.No: " + serial + "%0A" +
    "üë§ Name: " + name + "%0A" +
    "üè´ Board: " + board + "%0A" +
    "üìö Class: " + cls + "%0A" +
    "üìû Phone: " + phone + "%0A" +
    "‚úâÔ∏è Email: " + email + "%0A" +
    "üìç Address: " + (address || "-") + "%0A%0A" +
    "‚úÖ Admin panel me approve kare.";

  window.open("https://wa.me/919140466780?text=" + msg, "_blank");
}

/* ‚úÖ ADMIN OPEN SYSTEM (Phone + Laptop Shortcut) */
let __tapCount = 0;
let __tapTimer = null;

function openAdminLogin(){
  $("adminLogin").classList.remove("hidden");
  closeMenu();
  setTimeout(()=>{ location.href="#adminLogin"; }, 150);
}

// üì± Phone: 7 tap within 10 sec
function secretAdminTap(){
  __tapCount++;
  clearTimeout(__tapTimer);
  __tapTimer = setTimeout(()=>{ __tapCount = 0; }, 10000);

  if(__tapCount >= 7){
    __tapCount = 0;
    openAdminLogin();
  }
}

// üíª Laptop: CTRL + SHIFT + A
document.addEventListener("keydown", function(e){
  if(e.ctrlKey && e.shiftKey && e.key.toLowerCase() === "a"){
    openAdminLogin();
  }
});

/* ‚úÖ Admin Security */
let ADMIN_PASSWORD = "amit6204";
let ADMIN_PIN = "7860";

function adminLogin(){
  const pass = $("adminPass").value.trim();
  const pin  = $("adminPin").value.trim();

  if(pass !== ADMIN_PASSWORD){
    alert("‚ùå Wrong admin password");
    return;
  }
  if(pin !== ADMIN_PIN){
    alert("‚ùå Wrong Admin PIN");
    return;
  }

  localStorage.setItem("bcc_admin_session","1");
  alert("‚úÖ Admin login successful");
  refreshAdmin();
  location.href="#home";
}

function adminLogout(){
  localStorage.removeItem("bcc_admin_session");
  alert("Admin logged out ‚úÖ");
  refreshAdmin();
  location.href="#home";
}

function isAdmin(){ return localStorage.getItem("bcc_admin_session")==="1"; }

/* ‚úÖ Admin Approve/Reject/Delete */
function approveAdmission(serial){
  if(!isAdmin()){ alert("‚ùå Admin not logged in"); return; }

  let all = getAdmissions();
  const idx = all.findIndex(a => a.serial === serial);
  if(idx===-1){ alert("Not found"); return; }

  if(all[idx].status==="APPROVED"){ alert("Already approved ‚úÖ"); return; }

  const admNo = makeAdmissionNo();
  all[idx].status="APPROVED";
  all[idx].admissionNo=admNo;
  setAdmissions(all);

  alert("‚úÖ Approved! Admission No: " + admNo);

  const a = all[idx];
  let msg =
    "‚úÖ *Admission APPROVED*%0A%0A" +
    "S.No: " + a.serial + "%0A" +
    "üÜî Admission No: *" + a.admissionNo + "*%0A" +
    "üë§ Name: " + a.name + "%0A" +
    "üìö Class: " + a.cls + "%0A" +
    "üè´ Board: " + a.board + "%0A" +
    "üìû Phone: " + a.phone + "%0A%0A" +
    "‚úÖ Status check page me ID Card available.";

  window.open("https://wa.me/919140466780?text=" + msg, "_blank");
  refreshAdmin();
}

function rejectAdmission(serial){
  if(!isAdmin()){ alert("‚ùå Admin not logged in"); return; }

  let all = getAdmissions();
  const idx = all.findIndex(a => a.serial === serial);
  if(idx === -1){ alert("Not found"); return; }

  if(all[idx].status === "APPROVED"){
    alert("‚ùå Approved admission reject nahi kar sakte. (Delete karo agar zarurat ho)");
    return;
  }

  if(!confirm("‚ùå Reject this admission request?")) return;

  all[idx].status = "REJECTED";
  all[idx].admissionNo = "";
  setAdmissions(all);

  alert("‚úÖ Rejected successfully");
  refreshAdmin();
}

function deleteAdmission(serial){
  if(!isAdmin()){ alert("‚ùå Admin not logged in"); return; }

  let all = getAdmissions();
  const idx = all.findIndex(a => a.serial === serial);
  if(idx === -1){ alert("Not found"); return; }

  if(!confirm("üóë Delete this admission permanently?")) return;

  all.splice(idx, 1);

  all = all.map((a,i)=> ({...a, serial:i+1}));
  setAdmissions(all);

  alert("üóë Deleted successfully");
  refreshAdmin();
}

/* ‚úÖ Admin Search + Filter */
let __adminFilter = "ALL";

function setAdminFilter(type){
  __adminFilter = type;

  ["fAll","fPending","fApproved","fRejected"].forEach(id=>{
    $(id).classList.remove("active");
  });

  if(type==="ALL") $("fAll").classList.add("active");
  if(type==="PENDING") $("fPending").classList.add("active");
  if(type==="APPROVED") $("fApproved").classList.add("active");
  if(type==="REJECTED") $("fRejected").classList.add("active");

  renderAdminAdmissions();
}

function refreshAdmin(){
  const panel = $("adminPanel");
  if(isAdmin()){
    panel.classList.remove("hidden");
    renderAdminAdmissions();
  }else{
    panel.classList.add("hidden");
  }
}

function renderAdminAdmissions(){
  const all = getAdmissions();
  const q = ($("adminSearch")?.value || "").trim().toLowerCase();

  let list = all;

  if(__adminFilter !== "ALL"){
    list = list.filter(a => (a.status || "") === __adminFilter);
  }

  if(q){
    list = list.filter(a =>
      (a.name || "").toLowerCase().includes(q) ||
      (a.phone || "").includes(q) ||
      (a.cls || "").toString().toLowerCase().includes(q) ||
      (a.board || "").toLowerCase().includes(q) ||
      (a.status || "").toLowerCase().includes(q) ||
      (a.admissionNo || "").toLowerCase().includes(q)
    );
  }

  if(list.length===0){
    $("adminAdmissionsList").innerHTML = `<div class="muted">No matching admissions found.</div>`;
    return;
  }

  let html="";
  list.forEach(a=>{
    let pill = `<span class="pill red">${a.status || "PENDING"}</span>`;
    if(a.status==="APPROVED") pill = `<span class="pill green">APPROVED</span>`;
    if(a.status==="REJECTED") pill = `<span class="pill red">REJECTED</span>`;

    html += `
      <div style="border:1px solid #eee;padding:12px;border-radius:14px;margin:10px 0;background:#fff;">
        <b>${a.serial}. ${a.name}</b> ${pill}<br>
        Board: ${a.board} | Class: ${a.cls}<br>
        Phone: ${a.phone}<br>
        Email: ${a.email}<br>
        Admission No: <b>${a.admissionNo ? a.admissionNo : "-"}</b><br>
        <small style="color:#666;">${a.time}</small><br><br>

        ${a.status==="PENDING"
          ? `
            <button class="small-btn" onclick="approveAdmission(${a.serial})">‚úÖ Approve</button>
            <button class="danger-btn" onclick="rejectAdmission(${a.serial})">‚ùå Reject</button>
            <button class="danger-btn" onclick="deleteAdmission(${a.serial})">üóë Delete</button>
          `
          : `
            <button class="danger-btn" onclick="deleteAdmission(${a.serial})">üóë Delete</button>
          `
        }
      </div>`;
  });

  $("adminAdmissionsList").innerHTML=html;
}

/* ‚úÖ Status Check */
function checkStatus(){
  const phone = $("checkPhone").value.trim();

  if(!isValidPhone(phone)){
    $("statusResult").innerHTML = `<span class="pill red">‚ùå Invalid Number</span><br><br>
    Enter valid 10-digit mobile number ‚úÖ`;
    $("statusIdCardWrap").style.display="none";
    return;
  }

  const all = getAdmissions();
  const adm = all.find(a => a.phone === phone);

  if(!adm){
    $("statusResult").innerHTML = `
      <span class="pill red">‚ùå Not Found</span><br><br>
      No admission request found for this number: <b>${phone}</b>`;
    $("statusIdCardWrap").style.display="none";
    return;
  }

  if(adm.status === "REJECTED"){
    $("statusResult").innerHTML = `
      <span class="pill red">‚ùå Rejected</span><br><br>
      <b>Name:</b> ${adm.name}<br>
      <b>Class:</b> ${adm.cls}<br>
      <b>Board:</b> ${adm.board}<br>
      <b>Mobile:</b> ${adm.phone}<br><br>
      ‚ùå Your admission request was rejected. Please contact admin.`;
    $("statusIdCardWrap").style.display="none";
    return;
  }

  if(adm.status === "PENDING"){
    $("statusResult").innerHTML = `
      <span class="pill red">‚è≥ Pending Approval</span><br><br>
      <b>Name:</b> ${adm.name}<br>
      <b>Class:</b> ${adm.cls}<br>
      <b>Board:</b> ${adm.board}<br>
      <b>Mobile:</b> ${adm.phone}<br><br>
      ‚úÖ Admin approval required.`;
    $("statusIdCardWrap").style.display="none";
    return;
  }

  $("statusResult").innerHTML = `
    <span class="pill green">‚úÖ Approved</span><br><br>
    <b>Name:</b> ${adm.name}<br>
    <b>Class:</b> ${adm.cls}<br>
    <b>Board:</b> ${adm.board}<br>
    <b>Mobile:</b> ${adm.phone}<br>
    <b>Admission No:</b> <b>${adm.admissionNo}</b><br>
  `;

  const studentID = "BCC-" + adm.admissionNo.replace("ADM-","");

  $("sCardName").textContent = adm.name;
  $("sCardBoard").textContent = adm.board;
  $("sCardClass").textContent = adm.cls;
  $("sCardPhone").textContent = adm.phone;
  $("sCardEmail").textContent = adm.email;
  $("sCardAdmNo").textContent = adm.admissionNo;
  $("sCardID").textContent = studentID;

  const qrData =
    "Bright Career Classes | Verified Student\n" +
    "Admission No: " + adm.admissionNo + "\n" +
    "Student ID: " + studentID + "\n" +
    "Name: " + adm.name + "\n" +
    "Board: " + adm.board + "\n" +
    "Class: " + adm.cls + "\n" +
    "Phone: " + adm.phone + "\n" +
    "Email: " + adm.email;

  $("sQrBox").innerHTML="";
  new QRCode($("sQrBox"), {text: qrData, width:100, height:100});

  $("statusIdCardWrap").style.display="block";
}

function downloadStatusIDCardPNG(){
  const node = $("statusIdCard");
  html2canvas(node,{scale:2}).then(canvas=>{
    const link=document.createElement("a");
    link.download="BCC_IDCard.png";
    link.href=canvas.toDataURL("image/png");
    link.click();
  });
}

/* Start */
refreshAdmin();
setAdminFilter("ALL");
</script>

</body>
</html>
